---
import ResourceLayout from "@layouts/ResourceLayout.astro";
import { getResource, getUser } from "@services/SparkAPI";

const { type, res } = Astro.params;

const resource = await getResource(res as string);
if (!resource.data) return Astro.redirect(`/${type}`);

const user = await getUser(resource.data.author);
---

<ResourceLayout resource={resource.data} user={user.data} />
